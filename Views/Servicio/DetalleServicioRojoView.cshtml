
@{
    ViewBag.Title = "DetalleServicioRojoView";
    Layout = "~/Views/MasterPage.cshtml";

    int PerfilInterior = Convert.ToInt32(Session["PerfilInterior"]);
    int Perfil = Convert.ToInt32(Session["Perfil"]);
    
}

<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="js/sb-admin.min.js"></script>

    <!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
    <!-- <meta charset="utf-8" /> -->
    <title>@ViewBag.Title</title>

</head>
<body>
    <div class="col-sm-12">
        <div class="x_panel" align="center">
            <div class="x_title">
                <div class="row">
                    <h3>DETALLE DEL SERVICIO<small></small></h3>
                </div>
            </div>
            <br>
            <div class="x_panel">
                <div class="row" style="overflow:auto">
                    <table id="Tb_Servicios" class="table table-striped table-bordered display nowrap">
                        <thead>
                            <tr>
                                <th class="tr" key="contenedorservicio">CONTENEDOR</th>
                                <th class="tr" key="bookingservicio">BOOKING</th>
                                <th class="tr" key="commodityservicio">COMMODITY</th>
                                <th class="tr" key="navieraservicio">NAVIERA</th>
                                <th class="tr" key="naveservicio">NAVE</th>
                                <th class="tr" key="puertoorigenservicio">PUERTO ORIGEN</th>
                                <th class="tr" key="puertodestinoservicio">PUERTO DESTINO</th>
                                <th class="tr" key="fechainicioservicio">FECHA INICIO AC LIVENTUS</th>
                                <th class="tr" key="etapodservicio">ETA POD</th>
                                <th class="tr" key="setpointacservicio">SETPOINT AC</th>
                                <th class="tr" key="setpointservicio">SETPOINT TEMPERATURA</th>
                                <th class="tr" key="modemservicio">MODEM ALMA</th>
                                <th class="tr" key="co2externo">CO2 EXTERNO</th>
                                <th class="tr" key="tempexterna">TEMPERATURA EXTERNA</th>
                                <th class="tr" key="sensorluz">SENSOR APERTURA PUERTA</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>TEMU9384875</td>
                                <td>087LIM328206</td>
                                <td>AVOCADOS</td>
                                <td>MSC</td>
                                <td>MSC AVNI</td>
                                <td>VALPARAISO</td>
                                <td>SAVANNAH</td>
                                <td>31-07-2019</td>
                                <td>12-08-2019</td>
                                <td>8% CO2</td>
                                <td>5°C</td>
                                <td>SI</td>
                                <td>SI</td>
                                <td>SI</td>
                                <td>NO</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="x_title">
                <div class="row">
                    <h3>GRÁFICOS DE COMPORTAMIENTO DEL SERVICIO</h3>
                    <div class="x_panel">
                        <br><br>
                            <i class="fa fa-exclamation-circle fa-5x" style="color:red" width="100%" height="400px"></i>
                            <br><br>
                            Información de gráficos no disponible.
                            <br>
                            Favor contactar con área comercial Liventus
                        <br><br><br>
                    </div>
                </div>
            </div>
            <br>
            <div class="x_title">
                <div class="row">
                    <h3>TRAZABILIDAD LOGÍSTICA DEL SERVICIO</h3>
                    <div id="googleMap" key="AIzaSyAodWcupFgDhnsbvzZo8Dxe7W2gojsWFQE" style="width:100%;height:500px;border:2px solid #999999;">
                        -aca va mi mapa-
                    </div>
                </div>
            </div>
        </div>

        <div class="x_panel">
            <div class="row">
                <i>
                    <b>
                        Confidentiality Notice:
                    </b> The information contained in this message may be privileged and confidential. If the reader is not the intended recipient, or the agent of the intended recipient, any unauthorized use, disclosure, copying distribution or dissemination is strictly prohibited. If you have received this communication in error, please notify the sender immediately by telephone and return this message to the above address. This message shall not be construed as any admission of liability, amount, expenses or any issues by LIVENTUS S.A., and is given without prejudice to any rights or defenses available to the owners of LIVENTUS S.A., including the right to limit or reject liability. In no case may this information be used to establish and/or present a claim against Liventus S.A., its agencies, and / or the Shipping Lines associated with the shipments that are reported.

                </i>
            </div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">

    google.maps.event.addDomListener(window, 'load', init);

    //document.addEventListener("DOMContentLoaded", init);

    function init() {

        //ttp://132.255.70.203/Grafico/GraficoAlma.php?Controller=886B0F02CA67&Fecha=28-11-2018 2012:29
        // "td:eq(34)"  ->  ULTIMO CONTROLADOR ; "td:eq(36)"  ->  FECHA INSTALACION CONTROLADOR
        //document.getElementById("Grafico").src = "http://132.255.70.203/Grafico/GraficoAlmaExt.php?Controller="+"886B0F02CA67"+"&Fecha="+"28-11-2018 2012:29" //$(this).find("td:eq(34)").html() + "&Fecha=" + $(this).find("td:eq(36)").html();
        $('#GraficoUnitarioModal').trigger('click');


        // Configuración del mapa
        var latlng1 = new google.maps.LatLng(-27.4269255, -55.94670759999997);
        var latlng2 = new google.maps.LatLng(-34.6036844, -58.381559100000004);
        var latlng3 = new google.maps.LatLng(-43.2934246, -65.11148179999998);
        var latlng4 = new google.maps.LatLng(-54.8053998, -68.32420609999997);

        var mapProp = {
            zoom: 3,
            center: latlng2,
            mapTypeId: google.maps.MapTypeId.ROADMAP,    //puede ser TERRAIN
            disableDefaultUI: true,
            zoomControl: true,
            mapTypeControl: true,
            scaleControl: true,
            streetViewControl: true,
            rotateControl: true,
            fullscreenControl: true
        };
        // Agregando el mapa al tag de id googleMap
        var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);

        // Coordenada de marcadores
        crearMarket(latlng1);
        crearMarket(latlng2);
        crearMarket(latlng3);
        crearMarket(latlng4);

        function crearMarket(latlng, name) {

            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: 'Containers grupo ' + name,
                draggable: false
            });

            google.maps.event.addDomListener(map, 'click', function () {
                infoWindow.close();
            });

            google.maps.event.addDomListener(marker, 'click', function () {

                //var markerLatLng = marker.getPosition();
                contentString = '<div class="infoWindow">  <div class="row" >  <h4 class="modal-title" id="myModalLabel1">MEDICIÓN DE SERVICIO</h4> </div> <div class="row" > <table id="Tb_Medicion_Servicio" class="table table-striped table-bordered display nowrap"> <thead> <tr> <td class="tr" align="center" key="ubicacionservicio"><b>UBICACIÓN</b></td> <td class="tr" align="center" key="fechaconexion"><b>FECHA CONEXIÓN</b></td> </tr> </thead> <tbody> <tr> <td class="td" align="center">ARGENTINA</td> <td class="td" align="center">30/08/2019 08:45:00</td> </tr> </tbody> </table> </div> </div>';

                var infoWindow = new google.maps.InfoWindow();
                infoWindow.setContent(contentString);
                infoWindow.open(map, this);

            });

            marker.setMap(map);
        }

        // Coordenada de la ruta (desde Misiones hasta Tierra del Fuego)
        var travelCoordinates = [
            latlng1,
            latlng2,
            latlng3,
            latlng4
        ];

        // Información de la ruta (coordenadas, color de línea, etc...)
        var travel = new google.maps.Polyline({
            path: travelCoordinates,
            geodesic: true,
            strokeColor: '#FF0000',
            strokeOpacity: 1.0,
            strokeWeight: 2
        });

        // Creando la ruta en el mapa
        travel.setMap(map);




    }

</script>